function b(e){if(v(),!e)return;const o=new RegExp(e,"gi"),t=document.body.innerText;let n;const i=[];for(;null!==(n=o.exec(t));)i.push(n.index);i.length>0?E(e):console.log("No matches found.")}function E(e){document.body?y(document.body).forEach((o=>{const t=o.nodeValue;if(t&&t.match(new RegExp(e,"gi"))){const n=t.split(new RegExp(`(${e})`,"gi")),i=document.createDocumentFragment();n.forEach((o=>{if(o.match(new RegExp(e,"gi"))){const e=document.createElement("mark");e.className="highlight",e.textContent=o,i.appendChild(e)}else i.appendChild(document.createTextNode(o))})),o.parentNode?.replaceChild(i,o)}})):console.log("Error: document body is not available.")}function y(e){let o=[];return 3===e.nodeType&&o.push(e),e.hasChildNodes()&&e.childNodes.forEach((e=>{o=o.concat(y(e))})),o}function v(){document.body?document.querySelectorAll(".highlight").forEach((e=>{const o=e.parentNode;o&&e.outerHTML&&(o.innerHTML=o.innerHTML.replace(e.outerHTML,e.innerText))})):console.log("Error: document body is not available.")}function k(){document.body?document.querySelectorAll(".highlight").forEach((e=>{const o=document.createElement("span");o.innerHTML=e.innerHTML,e.parentNode?.replaceChild(o,e)})):console.log("Error: document body is not available.")}window.performSearch=b,window.clearSearch=k;let s=document.getElementById("cursor"),o="NORMAL",i="";const g={vw:window.innerWidth/100,vh:window.innerHeight/100};let l={x:g.vw,y:g.vh},c=0,u=document.querySelectorAll(".nvim-line");const p=u[0]?.getBoundingClientRect();function m(){o="NORMAL",i="",window.updateStatusBar(o,"")}function x(e){if(e.startsWith(":")){const o=e.slice(1).toLowerCase();switch(o){case"proj":window.location.href="neovim/projects";break;case"about":window.location.href="/neovim/about";break;case"hi":window.location.href="/neovim/contact";break;case"q":window.location.href="/";break;case"h":window.location.href="/neovim/help";break;case"b":const e=document.getElementById("key-bindings");e&&e.classList.toggle("hidden");break;default:console.log("Unknown command:",o)}}else if(e.startsWith("/")){const o=e.slice(1);window.performSearch(o)}}function S(e){switch(e){case"u":N();break;case"j":case"k":w(e);break;case"g":C();break;case"G":M();break;case"i":o="INSERT",window.updateStatusBar(o);break;case"v":o="VISUAL",window.updateStatusBar(o)}B()}function B(){window.updateStatusBar(void 0,void 0,void 0,`${Math.floor(l.y/100)||1}:${Math.floor(l.x)||1}`),s?(s.style.top=`${l.y}px`,s.style.left=`${l.x}px`):s=document.getElementById("cursor")}function w(e){switch(e){case"k":c>0&&c--;break;case"j":c<u.length-1&&c++;break;default:console.log("Invalid direction")}const{y:o,x:t}=u[c]?.getBoundingClientRect()??{y:0,x:0};l.y=o,l.x=t-18}function C(){c=0,w("k")}function M(){c=u.length-1,w("j")}function N(){const e=window.location.pathname;if("/"===e)return;const o=e.split("/").filter(Boolean);1===o.length?window.location.href="/":window.location.href="/"+o.slice(0,-1).join("/")}function L(){const e=u[c]?.getAttribute("data-href");e&&(window.location.href=e)}function R(){const e={mode:document.getElementById("mode"),commandLine:document.getElementById("command-line"),fileInfo:document.getElementById("file-info"),position:document.getElementById("position")};window.updateStatusBar=function(o,t,n,i){void 0!==o&&(e.mode.textContent=o),void 0!==t&&(e.commandLine.textContent=t),void 0!==n&&(e.fileInfo.textContent=n),void 0!==i&&(e.position.textContent=i)}}s&&(s.style.top=`${p?.y}px`,s.style.left=p?.x-18+"px "),document.addEventListener("keydown",(e=>{if("INSERT"!==o||"Escape"===e.key)switch(e.key){case":":e.preventDefault(),o="COMMAND",i=":",window.updateStatusBar(o,i);break;case"/":e.preventDefault(),o="SEARCH",i="/",window.updateStatusBar(o,i);break;case"Escape":m(),window.clearSearch();break;case"Enter":("COMMAND"===o||"SEARCH"===o)&&(x(i),m()),"NORMAL"===o&&L();break;case"Backspace":("COMMAND"===o||"SEARCH"===o)&&(e.preventDefault(),i=i.slice(0,-1),0===i.length?m():window.updateStatusBar(void 0,i));break;default:"COMMAND"===o||"SEARCH"===o?(e.preventDefault(),i+=e.key,window.updateStatusBar(void 0,i)):S(e.key)}})),document.addEventListener("DOMContentLoaded",R);